{"ast":null,"code":"import { useRef, useEffect, forwardRef, useState, useImperativeHandle, createElement } from 'react';\n\nconst noop = () => {};\n\nfunction useInterval(callback, delay, immediate) {\n  const savedCallback = useRef(noop);\n  useEffect(() => {\n    savedCallback.current = callback;\n  });\n  useEffect(() => {\n    if (!immediate) return;\n    if (delay === null || delay === false) return;\n    savedCallback.current();\n  }, [immediate]);\n  useEffect(() => {\n    if (delay === null || delay === false) return undefined;\n\n    const tick = () => savedCallback.current();\n\n    const id = setInterval(tick, delay);\n    return () => clearInterval(id);\n  }, [delay]);\n}\n\nfunction randomInt(min, max) {\n  return Math.floor(Math.random() * (max - min + 1) + min);\n}\n\nconst LoadingBar = forwardRef((_ref, ref) => {\n  let {\n    progress,\n    height: _height = 2,\n    className: _className = '',\n    color: _color = 'red',\n    background: _background = 'transparent',\n    onLoaderFinished,\n    transitionTime: _transitionTime = 300,\n    loaderSpeed: _loaderSpeed = 500,\n    waitingTime: _waitingTime = 1000,\n    shadow: _shadow = true,\n    containerStyle: _containerStyle = {},\n    style: _style = {},\n    shadowStyle: shadowStyleProp = {},\n    containerClassName: _containerClassName = ''\n  } = _ref;\n  const isMounted = useRef(false);\n  const [localProgress, localProgressSet] = useState(0);\n  const [pressedContinuous, setPressedContinuous] = useState({\n    active: false,\n    startingValue: 20,\n    refreshRate: 1000\n  });\n  const [usingProps, setUsingProps] = useState(false);\n  const [pressedStaticStart, setStaticStartPressed] = useState({\n    active: false,\n    value: 20\n  });\n  const initialLoaderStyle = {\n    height: '100%',\n    background: _color,\n    transition: `all ${_loaderSpeed}ms ease`,\n    width: '0%'\n  };\n  const loaderContainerStyle = {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    height: _height,\n    background: _background,\n    zIndex: 99999999999,\n    width: 100 + '%'\n  };\n  const initialShadowStyles = {\n    boxShadow: `0 0 10px ${_color}, 0 0 10px ${_color}`,\n    width: '5%',\n    opacity: 1,\n    position: 'absolute',\n    height: '100%',\n    transition: `all ${_loaderSpeed}ms ease`,\n    transform: 'rotate(3deg) translate(0px, -4px)',\n    left: '-10rem'\n  };\n  const [loaderStyle, loaderStyleSet] = useState(initialLoaderStyle);\n  const [shadowStyle, shadowStyleSet] = useState(initialShadowStyles);\n  useEffect(() => {\n    isMounted.current = true;\n    return () => {\n      isMounted.current = false;\n    };\n  }, []);\n  useImperativeHandle(ref, () => ({\n    continuousStart(startingValue) {\n      let refreshRate = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1000;\n      if (pressedStaticStart.active) return;\n\n      if (usingProps) {\n        console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\");\n        return;\n      }\n\n      const val = startingValue || randomInt(10, 20);\n      setPressedContinuous({\n        active: true,\n        refreshRate,\n        startingValue\n      });\n      localProgressSet(val);\n      checkIfFull(val);\n    },\n\n    staticStart(startingValue) {\n      if (pressedContinuous.active) return;\n\n      if (usingProps) {\n        console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\");\n        return;\n      }\n\n      const val = startingValue || randomInt(30, 50);\n      setStaticStartPressed({\n        active: true,\n        value: val\n      });\n      localProgressSet(val);\n      checkIfFull(val);\n    },\n\n    complete() {\n      if (usingProps) {\n        console.warn(\"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\");\n        return;\n      }\n\n      localProgressSet(100);\n      checkIfFull(100);\n    }\n\n  }));\n  useEffect(() => {\n    loaderStyleSet({ ...loaderStyle,\n      background: _color\n    });\n    shadowStyleSet({ ...shadowStyle,\n      boxShadow: `0 0 10px ${_color}, 0 0 5px ${_color}`\n    });\n  }, [_color]);\n  useEffect(() => {\n    if (ref) {\n      if (ref && progress !== undefined) {\n        console.warn('react-top-loading-bar: You can\\'t use both controlling by props and ref methods to control the bar! Please use only props or only ref methods! Ref methods will override props if \"ref\" property is available.');\n        return;\n      }\n\n      checkIfFull(localProgress);\n      setUsingProps(false);\n    } else {\n      if (progress) checkIfFull(progress);\n      setUsingProps(true);\n    }\n  }, [progress]);\n\n  const checkIfFull = _progress => {\n    if (_progress >= 100) {\n      loaderStyleSet({ ...loaderStyle,\n        width: '100%'\n      });\n\n      if (_shadow) {\n        shadowStyleSet({ ...shadowStyle,\n          left: _progress - 10 + '%'\n        });\n      }\n\n      setTimeout(() => {\n        if (!isMounted.current) {\n          return;\n        }\n\n        loaderStyleSet({ ...loaderStyle,\n          opacity: 0,\n          width: '100%',\n          transition: `all ${_transitionTime}ms ease-out`,\n          color: _color\n        });\n        setTimeout(() => {\n          if (!isMounted.current) {\n            return;\n          }\n\n          if (pressedContinuous.active) {\n            setPressedContinuous({ ...pressedContinuous,\n              active: false\n            });\n            localProgressSet(0);\n            checkIfFull(0);\n          }\n\n          if (pressedStaticStart.active) {\n            setStaticStartPressed({ ...pressedStaticStart,\n              active: false\n            });\n            localProgressSet(0);\n            checkIfFull(0);\n          }\n\n          if (onLoaderFinished) onLoaderFinished();\n          localProgressSet(0);\n          checkIfFull(0);\n        }, _transitionTime);\n      }, _waitingTime);\n    } else {\n      loaderStyleSet(_loaderStyle => {\n        return { ..._loaderStyle,\n          width: _progress + '%',\n          opacity: 1,\n          transition: _progress > 0 ? `all ${_loaderSpeed}ms ease` : ''\n        };\n      });\n\n      if (_shadow) {\n        shadowStyleSet({ ...shadowStyle,\n          left: _progress - 5.5 + '%',\n          transition: _progress > 0 ? `all ${_loaderSpeed}ms ease` : ''\n        });\n      }\n    }\n  };\n\n  useInterval(() => {\n    const random = randomInt(10, 20);\n\n    if (localProgress + random < 90) {\n      localProgressSet(localProgress + random);\n      checkIfFull(localProgress + random);\n    }\n  }, pressedContinuous.active ? pressedContinuous.refreshRate : null);\n  return createElement(\"div\", {\n    className: _containerClassName,\n    style: { ...loaderContainerStyle,\n      ..._containerStyle\n    }\n  }, createElement(\"div\", {\n    className: _className,\n    style: { ...loaderStyle,\n      ..._style\n    }\n  }, _shadow ? createElement(\"div\", {\n    style: { ...shadowStyle,\n      ...shadowStyleProp\n    }\n  }) : null));\n});\nexport default LoadingBar;","map":{"version":3,"sources":["../src/useInterval.ts","../src/utils.ts","../src/index.tsx"],"names":["noop","useInterval","callback","delay","immediate","savedCallback","useRef","useEffect","tick","id","setInterval","clearInterval","randomInt","min","max","Math","LoadingBar","forwardRef","height","className","color","background","transitionTime","loaderSpeed","waitingTime","shadow","containerStyle","style","shadowStyle","shadowStyleProp","containerClassName","isMounted","useState","active","startingValue","refreshRate","value","initialLoaderStyle","transition","width","loaderContainerStyle","position","top","left","zIndex","initialShadowStyles","boxShadow","opacity","transform","useImperativeHandle","continuousStart","pressedStaticStart","console","val","setPressedContinuous","localProgressSet","checkIfFull","staticStart","pressedContinuous","setStaticStartPressed","complete","loaderStyleSet","shadowStyleSet","ref","progress","setUsingProps","_progress","setTimeout","onLoaderFinished","_loaderStyle","random","localProgress"],"mappings":"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","sourcesContent":["import { useEffect, useRef } from 'react'\n\n/** keep typescript happy */\nconst noop = () => {}\n\nexport function useInterval(\n  callback: () => void,\n  delay: number | null | false,\n  immediate?: boolean\n) {\n  const savedCallback = useRef(noop)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  })\n\n  // Execute callback if immediate is set.\n  useEffect(() => {\n    if (!immediate) return\n    if (delay === null || delay === false) return\n    savedCallback.current()\n  }, [immediate])\n\n  // Set up the interval.\n  useEffect(() => {\n    if (delay === null || delay === false) return undefined\n    const tick = () => savedCallback.current()\n    const id = setInterval(tick, delay)\n    return () => clearInterval(id)\n  }, [delay])\n}\n\nexport default useInterval\n","export function randomInt(min: number, max: number): number {\n  // @ts-ignore\n  return Math.floor(Math.random() * (max - min + 1) + min)\n}\n","import * as React from 'react'\nimport {\n  CSSProperties,\n  useEffect,\n  useState,\n  forwardRef,\n  useImperativeHandle,\n  useRef,\n} from 'react'\nimport { useInterval } from './useInterval'\nimport { randomInt } from './utils'\n\ntype IProps = {\n  progress?: number\n  color?: string\n  shadow?: boolean\n  background?: string\n  height?: number\n  onLoaderFinished?: () => void\n  className?: string\n  containerClassName?: string\n  loaderSpeed?: number\n  transitionTime?: number\n  waitingTime?: number\n  style?: CSSProperties\n  containerStyle?: CSSProperties\n  shadowStyle?: CSSProperties\n}\n\nexport type LoadingBarRef = {\n  continuousStart: (startingValue: number, refreshRate: number) => void\n  staticStart: (startingValue: number) => void\n  complete: () => void;\n}\n\nconst LoadingBar = forwardRef<LoadingBarRef, IProps>(\n  (\n    {\n      progress,\n      height = 2,\n      className = '',\n      color = 'red',\n      background = 'transparent',\n      onLoaderFinished,\n      transitionTime = 300,\n      loaderSpeed = 500,\n      waitingTime = 1000,\n      shadow = true,\n      containerStyle = {},\n      style = {},\n      shadowStyle: shadowStyleProp = {},\n      containerClassName = ''\n    },\n    ref\n  ) => {\n    const isMounted = useRef(false);\n    const [localProgress, localProgressSet] = useState<number>(0)\n    const [pressedContinuous, setPressedContinuous] = useState<{\n      active: boolean\n      startingValue: number\n      refreshRate: number\n    }>({ active: false, startingValue: 20, refreshRate: 1000 })\n    const [usingProps, setUsingProps] = useState(false)\n\n    const [pressedStaticStart, setStaticStartPressed] = useState<{\n      active: boolean\n      value: number\n    }>({ active: false, value: 20 })\n\n    const initialLoaderStyle: CSSProperties = {\n      height: '100%',\n      background: color,\n      transition: `all ${loaderSpeed}ms ease`,\n      width: '0%',\n    }\n\n    const loaderContainerStyle: CSSProperties = {\n      position: 'fixed',\n      top: 0,\n      left: 0,\n      height,\n      background,\n      zIndex: 99999999999,\n      width: 100 + '%',\n    }\n\n    const initialShadowStyles: CSSProperties = {\n      boxShadow: `0 0 10px ${color}, 0 0 10px ${color}`,\n      width: '5%',\n      opacity: 1,\n      position: 'absolute',\n      height: '100%',\n      transition: `all ${loaderSpeed}ms ease`,\n      transform: 'rotate(3deg) translate(0px, -4px)',\n      left: '-10rem',\n    }\n\n    const [loaderStyle, loaderStyleSet] = useState<CSSProperties>(\n      initialLoaderStyle\n    )\n    const [shadowStyle, shadowStyleSet] = useState<CSSProperties>(\n      initialShadowStyles\n    )\n\n    useEffect(() => {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      }\n    }, []);\n\n    useImperativeHandle(ref, () => ({\n      continuousStart(startingValue: number, refreshRate: number = 1000) {\n        if (pressedStaticStart.active) return\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n\n        const val = startingValue || randomInt(10, 20)\n        setPressedContinuous({\n          active: true,\n          refreshRate,\n          startingValue,\n        })\n        localProgressSet(val)\n        checkIfFull(val)\n      },\n      staticStart(startingValue: number) {\n        if (pressedContinuous.active) return\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n\n        const val = startingValue || randomInt(30, 50)\n        setStaticStartPressed({\n          active: true,\n          value: val,\n        })\n        localProgressSet(val)\n        checkIfFull(val)\n      },\n      complete() {\n        if (usingProps) {\n          console.warn(\n            \"react-top-loading-bar: You can't use both controlling by props and ref methods to control the bar!\"\n          )\n          return\n        }\n        localProgressSet(100)\n        checkIfFull(100)\n      },\n    }))\n\n    useEffect(() => {\n      loaderStyleSet({\n        ...loaderStyle,\n        background: color,\n      })\n\n      shadowStyleSet({\n        ...shadowStyle,\n        boxShadow: `0 0 10px ${color}, 0 0 5px ${color}`,\n      })\n    }, [color])\n\n    useEffect(() => {\n      if (ref) {\n        if (ref && progress !== undefined) {\n          console.warn(\n            'react-top-loading-bar: You can\\'t use both controlling by props and ref methods to control the bar! Please use only props or only ref methods! Ref methods will override props if \"ref\" property is available.'\n          )\n          return\n        }\n        checkIfFull(localProgress)\n        setUsingProps(false)\n      } else {\n        if (progress) checkIfFull(progress)\n\n        setUsingProps(true)\n      }\n    }, [progress])\n\n    const checkIfFull = (_progress: number) => {\n      if (_progress >= 100) {\n        // now it should wait a little bit\n        loaderStyleSet({\n          ...loaderStyle,\n          width: '100%',\n        })\n        if (shadow) {\n          shadowStyleSet({\n            ...shadowStyle,\n            left: _progress - 10 + '%',\n          })\n        }\n\n        setTimeout(() => {\n          if (!isMounted.current) {\n            return;\n          }\n          // now it can fade out\n          loaderStyleSet({\n            ...loaderStyle,\n            opacity: 0,\n            width: '100%',\n            transition: `all ${transitionTime}ms ease-out`,\n            color: color,\n          })\n\n          setTimeout(() => {\n            if (!isMounted.current) {\n              return;\n            }\n            // here we wait for it to fade\n            if (pressedContinuous.active) {\n              // if we have continous loader just ending, we kill it and reset it\n              setPressedContinuous({\n                ...pressedContinuous,\n                active: false,\n              })\n              localProgressSet(0)\n              checkIfFull(0)\n            }\n\n            if (pressedStaticStart.active) {\n              setStaticStartPressed({\n                ...pressedStaticStart,\n                active: false,\n              })\n              localProgressSet(0)\n              checkIfFull(0)\n            }\n\n            if (onLoaderFinished) onLoaderFinished()\n            localProgressSet(0)\n            checkIfFull(0)\n          }, transitionTime)\n        }, waitingTime)\n      } else {\n        loaderStyleSet((_loaderStyle) => {\n          return {\n            ..._loaderStyle,\n            width: _progress + '%',\n            opacity: 1,\n            transition: _progress > 0 ? `all ${loaderSpeed}ms ease` : '',\n          }\n        })\n\n        if (shadow) {\n          shadowStyleSet({\n            ...shadowStyle,\n            left: _progress - 5.5 + '%',\n            transition: _progress > 0 ? `all ${loaderSpeed}ms ease` : '',\n          })\n        }\n      }\n    }\n\n    useInterval(\n      () => {\n        const random = randomInt(10, 20)\n\n        if (localProgress + random < 90) {\n          localProgressSet(localProgress + random)\n          checkIfFull(localProgress + random)\n        }\n      },\n      pressedContinuous.active ? pressedContinuous.refreshRate : null\n    )\n\n    return (\n      <div className={containerClassName} style={{...loaderContainerStyle, ...containerStyle}}>\n        <div className={className} style={{...loaderStyle, ...style}}>\n          {shadow ? <div style={{...shadowStyle, ...shadowStyleProp}} /> : null}\n        </div>\n      </div>\n    )\n  }\n)\n\nexport {\n  IProps,\n}\n\nexport default LoadingBar\n"]},"metadata":{},"sourceType":"module"}